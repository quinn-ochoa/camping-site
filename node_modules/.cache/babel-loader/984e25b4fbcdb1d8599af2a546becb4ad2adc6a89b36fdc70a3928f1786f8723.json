{"ast":null,"code":"import _defineProperty from\"/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// import { PROMOTIONS } from '../../app/shared/PROMOTIONS';\nimport{baseUrl}from'../../app/shared/baseUrl';import{mapImageURL}from'../../utils/mapImageURL';export var fetchPromotions=createAsyncThunk('promotions/fetchPromotions',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(baseUrl+'promotions');case 2:response=_context.sent;if(response.ok){_context.next=5;break;}return _context.abrupt(\"return\",Promise.reject('Unable to fetch, status: '+response.status));case 5:_context.next=7;return response.json();case 7:data=_context.sent;return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}},_callee);})));var initialState={promotionsArray:[],isLoading:true,errMsg:''};var promotionSlice=createSlice({name:'partners',initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchPromotions.pending,function(state){state.isLoading=true;}),_defineProperty(_extraReducers,fetchPromotions.fulfilled,function(state,action){state.isLoading=false;state.errMsg='';state.promotionsArray=mapImageURL(action.payload);}),_defineProperty(_extraReducers,fetchPromotions.rejected,function(state,action){state.isLoading=false;state.errMsg=action.error?action.error.message:'Fetch failed';}),_extraReducers)});export var promotionsReducer=promotionSlice.reducer;export var selectFeaturedPromotion=function selectFeaturedPromotion(state){return{featuredItem:state.promotions.promotionsArray.find(function(promotion){return promotion.featured;}),isLoading:state.promotions.isLoading,errMsg:state.promotions.errMsg};};","map":{"version":3,"names":["createSlice","createAsyncThunk","baseUrl","mapImageURL","fetchPromotions","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","ok","abrupt","Promise","reject","status","json","stop","initialState","promotionsArray","isLoading","errMsg","promotionSlice","name","reducers","extraReducers","_extraReducers","_defineProperty","pending","state","fulfilled","action","payload","rejected","error","message","promotionsReducer","reducer","selectFeaturedPromotion","featuredItem","promotions","find","promotion","featured"],"sources":["/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/src/features/promotions/promotionsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// import { PROMOTIONS } from '../../app/shared/PROMOTIONS';\nimport { baseUrl } from '../../app/shared/baseUrl';\nimport { mapImageURL } from '../../utils/mapImageURL';\n\nexport const fetchPromotions = createAsyncThunk(\n    'promotions/fetchPromotions',\n    async () => {\n        const response = await fetch(baseUrl + 'promotions');\n        if (!response.ok) {\n            return Promise.reject('Unable to fetch, status: ' + response.status);\n        }\n        const data = await response.json();\n        return data;\n    }\n);\n\nconst initialState = {\n    promotionsArray: [],\n    isLoading: true,\n    errMsg: ''\n};\n\nconst promotionSlice = createSlice({\n    name: 'partners',\n    initialState, \n    reducers:{},\n    extraReducers:{\n        [fetchPromotions.pending]:(state)=>{\n            state.isLoading=true;\n        },\n        [fetchPromotions.fulfilled]:(state, action)=>{\n            state.isLoading = false;\n            state.errMsg='';\n            state.promotionsArray=mapImageURL(action.payload);\n        },\n        [fetchPromotions.rejected]:(state, action)=>{\n            state.isLoading=false;\n            state.errMsg=action.error ? action.error.message:'Fetch failed';\n        }\n    }\n});\n\nexport const promotionsReducer = promotionSlice.reducer;\n\nexport const selectFeaturedPromotion = (state) => {\n    return {\n        featuredItem: state.promotions.promotionsArray.find(\n            (promotion) => promotion.featured\n        ),\n        isLoading: state.promotions.isLoading,\n        errMsg: state.promotions.errMsg\n    };\n};"],"mappings":"qdAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAChE;AACA,OAASC,OAAO,KAAQ,0BAA0B,CAClD,OAASC,WAAW,KAAQ,yBAAyB,CAErD,MAAO,IAAM,CAAAC,eAAe,CAAGH,gBAAgB,CAC3C,4BAA4B,cAAAI,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAC5B,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SAC2B,CAAAC,KAAK,CAACd,OAAO,CAAG,YAAY,CAAC,QAA9CO,QAAQ,CAAAI,QAAA,CAAAI,IAAA,IACTR,QAAQ,CAACS,EAAE,EAAAL,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAM,MAAA,UACLC,OAAO,CAACC,MAAM,CAAC,2BAA2B,CAAGZ,QAAQ,CAACa,MAAM,CAAC,SAAAT,QAAA,CAAAE,IAAA,SAErD,CAAAN,QAAQ,CAACc,IAAI,EAAE,QAA5Bb,IAAI,CAAAG,QAAA,CAAAI,IAAA,QAAAJ,QAAA,CAAAM,MAAA,UACHT,IAAI,0BAAAG,QAAA,CAAAW,IAAA,MAAAhB,OAAA,GACd,GACJ,CAED,GAAM,CAAAiB,YAAY,CAAG,CACjBC,eAAe,CAAE,EAAE,CACnBC,SAAS,CAAE,IAAI,CACfC,MAAM,CAAE,EACZ,CAAC,CAED,GAAM,CAAAC,cAAc,CAAG7B,WAAW,CAAC,CAC/B8B,IAAI,CAAE,UAAU,CAChBL,YAAY,CAAZA,YAAY,CACZM,QAAQ,CAAC,CAAC,CAAC,CACXC,aAAa,EAAAC,cAAA,IAAAC,eAAA,CAAAD,cAAA,CACR7B,eAAe,CAAC+B,OAAO,CAAE,SAACC,KAAK,CAAG,CAC/BA,KAAK,CAACT,SAAS,CAAC,IAAI,CACxB,CAAC,EAAAO,eAAA,CAAAD,cAAA,CACA7B,eAAe,CAACiC,SAAS,CAAE,SAACD,KAAK,CAAEE,MAAM,CAAG,CACzCF,KAAK,CAACT,SAAS,CAAG,KAAK,CACvBS,KAAK,CAACR,MAAM,CAAC,EAAE,CACfQ,KAAK,CAACV,eAAe,CAACvB,WAAW,CAACmC,MAAM,CAACC,OAAO,CAAC,CACrD,CAAC,EAAAL,eAAA,CAAAD,cAAA,CACA7B,eAAe,CAACoC,QAAQ,CAAE,SAACJ,KAAK,CAAEE,MAAM,CAAG,CACxCF,KAAK,CAACT,SAAS,CAAC,KAAK,CACrBS,KAAK,CAACR,MAAM,CAACU,MAAM,CAACG,KAAK,CAAGH,MAAM,CAACG,KAAK,CAACC,OAAO,CAAC,cAAc,CACnE,CAAC,EAAAT,cAAA,CAET,CAAC,CAAC,CAEF,MAAO,IAAM,CAAAU,iBAAiB,CAAGd,cAAc,CAACe,OAAO,CAEvD,MAAO,IAAM,CAAAC,uBAAuB,CAAG,QAA1B,CAAAA,uBAAuBA,CAAIT,KAAK,CAAK,CAC9C,MAAO,CACHU,YAAY,CAAEV,KAAK,CAACW,UAAU,CAACrB,eAAe,CAACsB,IAAI,CAC/C,SAACC,SAAS,QAAK,CAAAA,SAAS,CAACC,QAAQ,GACpC,CACDvB,SAAS,CAAES,KAAK,CAACW,UAAU,CAACpB,SAAS,CACrCC,MAAM,CAAEQ,KAAK,CAACW,UAAU,CAACnB,MAC7B,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}