{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// import { PROMOTIONS } from '../../app/shared/PROMOTIONS';\nimport { baseUrl } from '../../app/shared/baseUrl';\nimport { mapImageURL } from '../../utils/mapImageURL';\nexport const fetchPromotions = createAsyncThunk('promotions/fetchPromotions', async () => {\n  const response = await fetch(baseUrl + 'promotions');\n  if (!response.ok) {\n    return Promise.reject('Unable to fetch, status: ' + response.status);\n  }\n  const data = await response.json();\n  return data;\n});\nconst initialState = {\n  promotionsArray: [],\n  isLoading: true,\n  errMsg: ''\n};\nconst promotionSlice = createSlice({\n  name: 'partners',\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [fetchPromotions.pending]: state => {\n      state.isLoading = true;\n    },\n    [fetchPromotions.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.errMsg = '';\n      state.promotionsArray = mapImageURL(action.payload);\n    },\n    [fetchPromotions.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.errMsg = action.error ? action.error.message : 'Fetch failed';\n    }\n  }\n});\nexport const promotionsReducer = promotionSlice.reducer;\nexport const selectFeaturedPromotion = state => {\n  return {\n    featuredItem: state.promotions.promotionsArray.find(promotion => promotion.featured),\n    isLoading: state.promotions.isLoading,\n    errMsg: state.promotions.errMsg\n  };\n};","map":{"version":3,"names":["createSlice","createAsyncThunk","baseUrl","mapImageURL","fetchPromotions","response","fetch","ok","Promise","reject","status","data","json","initialState","promotionsArray","isLoading","errMsg","promotionSlice","name","reducers","extraReducers","pending","state","fulfilled","action","payload","rejected","error","message","promotionsReducer","reducer","selectFeaturedPromotion","featuredItem","promotions","find","promotion","featured"],"sources":["/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/src/features/promotions/promotionsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// import { PROMOTIONS } from '../../app/shared/PROMOTIONS';\nimport { baseUrl } from '../../app/shared/baseUrl';\nimport { mapImageURL } from '../../utils/mapImageURL';\n\nexport const fetchPromotions = createAsyncThunk(\n    'promotions/fetchPromotions',\n    async () => {\n        const response = await fetch(baseUrl + 'promotions');\n        if (!response.ok) {\n            return Promise.reject('Unable to fetch, status: ' + response.status);\n        }\n        const data = await response.json();\n        return data;\n    }\n);\n\nconst initialState = {\n    promotionsArray: [],\n    isLoading: true,\n    errMsg: ''\n};\n\nconst promotionSlice = createSlice({\n    name: 'partners',\n    initialState, \n    reducers:{},\n    extraReducers:{\n        [fetchPromotions.pending]:(state)=>{\n            state.isLoading=true;\n        },\n        [fetchPromotions.fulfilled]:(state, action)=>{\n            state.isLoading = false;\n            state.errMsg='';\n            state.promotionsArray=mapImageURL(action.payload);\n        },\n        [fetchPromotions.rejected]:(state, action)=>{\n            state.isLoading=false;\n            state.errMsg=action.error ? action.error.message:'Fetch failed';\n        }\n    }\n});\n\nexport const promotionsReducer = promotionSlice.reducer;\n\nexport const selectFeaturedPromotion = (state) => {\n    return {\n        featuredItem: state.promotions.promotionsArray.find(\n            (promotion) => promotion.featured\n        ),\n        isLoading: state.promotions.isLoading,\n        errMsg: state.promotions.errMsg\n    };\n};"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE;AACA,SAASC,OAAO,QAAQ,0BAA0B;AAClD,SAASC,WAAW,QAAQ,yBAAyB;AAErD,OAAO,MAAMC,eAAe,GAAGH,gBAAgB,CAC3C,4BAA4B,EAC5B,YAAY;EACR,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACJ,OAAO,GAAG,YAAY,CAAC;EACpD,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;IACd,OAAOC,OAAO,CAACC,MAAM,CAAC,2BAA2B,GAAGJ,QAAQ,CAACK,MAAM,CAAC;EACxE;EACA,MAAMC,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,EAAE;EAClC,OAAOD,IAAI;AACf,CAAC,CACJ;AAED,MAAME,YAAY,GAAG;EACjBC,eAAe,EAAE,EAAE;EACnBC,SAAS,EAAE,IAAI;EACfC,MAAM,EAAE;AACZ,CAAC;AAED,MAAMC,cAAc,GAAGjB,WAAW,CAAC;EAC/BkB,IAAI,EAAE,UAAU;EAChBL,YAAY;EACZM,QAAQ,EAAC,CAAC,CAAC;EACXC,aAAa,EAAC;IACV,CAAChB,eAAe,CAACiB,OAAO,GAAGC,KAAK,IAAG;MAC/BA,KAAK,CAACP,SAAS,GAAC,IAAI;IACxB,CAAC;IACD,CAACX,eAAe,CAACmB,SAAS,GAAE,CAACD,KAAK,EAAEE,MAAM,KAAG;MACzCF,KAAK,CAACP,SAAS,GAAG,KAAK;MACvBO,KAAK,CAACN,MAAM,GAAC,EAAE;MACfM,KAAK,CAACR,eAAe,GAACX,WAAW,CAACqB,MAAM,CAACC,OAAO,CAAC;IACrD,CAAC;IACD,CAACrB,eAAe,CAACsB,QAAQ,GAAE,CAACJ,KAAK,EAAEE,MAAM,KAAG;MACxCF,KAAK,CAACP,SAAS,GAAC,KAAK;MACrBO,KAAK,CAACN,MAAM,GAACQ,MAAM,CAACG,KAAK,GAAGH,MAAM,CAACG,KAAK,CAACC,OAAO,GAAC,cAAc;IACnE;EACJ;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMC,iBAAiB,GAAGZ,cAAc,CAACa,OAAO;AAEvD,OAAO,MAAMC,uBAAuB,GAAIT,KAAK,IAAK;EAC9C,OAAO;IACHU,YAAY,EAAEV,KAAK,CAACW,UAAU,CAACnB,eAAe,CAACoB,IAAI,CAC9CC,SAAS,IAAKA,SAAS,CAACC,QAAQ,CACpC;IACDrB,SAAS,EAAEO,KAAK,CAACW,UAAU,CAAClB,SAAS;IACrCC,MAAM,EAAEM,KAAK,CAACW,UAAU,CAACjB;EAC7B,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}