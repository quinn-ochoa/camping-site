{"ast":null,"code":"import _defineProperty from\"/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';//import{CAMPSITES} from '../../app/shared/CAMPSITES';\nimport{baseUrl}from'../../app/shared/baseUrl';import{mapImageURL}from'../../utils/mapImageURL';export var fetchCampsites=createAsyncThunk('campsites/fetchCampsites',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(baseUrl+'campsites');case 2:response=_context.sent;if(response.ok){_context.next=5;break;}return _context.abrupt(\"return\",Promise.reject('Unable to fetch, status: '+response.status));case 5:_context.next=7;return response.json();case 7:data=_context.sent;return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}},_callee);})));var initialState={campsitesArray:[],isLoading:true,errMsg:''};var campsitesSlice=createSlice({name:'campsites',initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchCampsites.pending,function(state){state.isLoading=true;}),_defineProperty(_extraReducers,fetchCampsites.fulfilled,function(state,action){state.isLoading=false;state.errMsg='';state.campsitesArray=mapImageURL(action.payload);}),_defineProperty(_extraReducers,fetchCampsites.rejected,function(state,action){state.isLoading=false;state.errMsg=action.error?action.error.message:'Fetch failed';}),_extraReducers)});export var campsitesReducer=campsitesSlice.reducer;export var selectAllCampsites=function selectAllCampsites(state){return state.campsites.campsitesArray;};// export const selectRandomCampsite=()=>{\n//     return CAMPSITES[Math.floor(CAMPSITES.length*Math.random())];\n// };\nexport var selectCampsiteById=function selectCampsiteById(id){return function(state){return state.campsites.campsitesArray.find(function(campsite){return campsite.id===parseInt(id);});};};export var selectFeaturedCampsite=function selectFeaturedCampsite(state){return{featuredItem:state.campsites.campsitesArray.find(function(campsite){return campsite.featured;}),isLoading:state.campsites.isLoading,errMsg:state.campsites.errMsg};};","map":{"version":3,"names":["createSlice","createAsyncThunk","baseUrl","mapImageURL","fetchCampsites","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","ok","abrupt","Promise","reject","status","json","stop","initialState","campsitesArray","isLoading","errMsg","campsitesSlice","name","reducers","extraReducers","_extraReducers","_defineProperty","pending","state","fulfilled","action","payload","rejected","error","message","campsitesReducer","reducer","selectAllCampsites","campsites","selectCampsiteById","id","find","campsite","parseInt","selectFeaturedCampsite","featuredItem","featured"],"sources":["/Users/quynhletruc/Desktop/NucampFolder/3-React/nucampsite/src/features/campsites/campsitesSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n//import{CAMPSITES} from '../../app/shared/CAMPSITES';\nimport { baseUrl } from '../../app/shared/baseUrl';\nimport { mapImageURL } from '../../utils/mapImageURL';\n\nexport const fetchCampsites = createAsyncThunk(\n    'campsites/fetchCampsites',\n    async () => {\n        const response = await fetch(baseUrl + 'campsites');\n        if (!response.ok) {\n            return Promise.reject('Unable to fetch, status: ' + response.status);\n        }\n        const data = await response.json();\n        return data;\n    }\n);\n\nconst initialState = {\n    campsitesArray: [],\n    isLoading: true,\n    errMsg: ''\n};\n\nconst campsitesSlice = createSlice({\n    name: 'campsites',\n    initialState,\n    reducers: {},\n    extraReducers: {\n        [fetchCampsites.pending]: (state) => {\n            state.isLoading = true;\n        },\n        [fetchCampsites.fulfilled]: (state, action) => {\n            state.isLoading = false;\n            state.errMsg = '';\n            state.campsitesArray = mapImageURL(action.payload);\n        },\n        [fetchCampsites.rejected]: (state, action) => {\n            state.isLoading = false;\n            state.errMsg = action.error ? action.error.message : 'Fetch failed';\n        }\n    }\n});\n\nexport const campsitesReducer = campsitesSlice.reducer;\n\nexport const selectAllCampsites = (state) => {\n    return state.campsites.campsitesArray;\n};\n// export const selectRandomCampsite=()=>{\n//     return CAMPSITES[Math.floor(CAMPSITES.length*Math.random())];\n// };\n\nexport const selectCampsiteById = (id) => (state) => {\n    return state.campsites.campsitesArray.find(\n        (campsite) => campsite.id === parseInt(id)\n        );\n};\n\nexport const selectFeaturedCampsite = (state) => {\n    return {\n        featuredItem: state.campsites.campsitesArray.find(\n            (campsite) => campsite.featured\n        ),\n        isLoading: state.campsites.isLoading,\n        errMsg: state.campsites.errMsg\n    };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}